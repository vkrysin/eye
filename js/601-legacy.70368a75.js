(self["webpackChunkstarter_ionic"]=self["webpackChunkstarter_ionic"]||[]).push([[601],{9341:(e,t,r)=>{"use strict";var a=r(7293);e.exports=function(e,t){var r=[][e];return!!r&&a((function(){r.call(null,t||function(){return 1},1)}))}},1589:(e,t,r)=>{var a=r(1400),n=r(6244),l=r(6135),i=Array,o=Math.max;e.exports=function(e,t,r){for(var s=n(e),u=a(t,s),c=a(void 0===r?s:r,s),f=i(o(c-u,0)),p=0;u<c;u++,p++)l(f,p,e[u]);return f.length=p,f}},4362:(e,t,r)=>{var a=r(1589),n=Math.floor,l=function(e,t){var r=e.length,s=n(r/2);return r<8?i(e,t):o(e,l(a(e,0,s),t),l(a(e,s),t),t)},i=function(e,t){var r,a,n=e.length,l=1;while(l<n){a=l,r=e[l];while(a&&t(e[a-1],r)>0)e[a]=e[--a];a!==l++&&(e[a]=r)}return e},o=function(e,t,r,a){var n=t.length,l=r.length,i=0,o=0;while(i<n||o<l)e[i+o]=i<n&&o<l?a(t[i],r[o])<=0?t[i++]:r[o++]:i<n?t[i++]:r[o++];return e};e.exports=l},6135:(e,t,r)=>{"use strict";var a=r(4948),n=r(3070),l=r(9114);e.exports=function(e,t,r){var i=a(t);i in e?n.f(e,i,l(0,r)):e[i]=r}},5117:(e,t,r)=>{"use strict";var a=r(6330),n=TypeError;e.exports=function(e,t){if(!delete e[t])throw n("Cannot delete property "+a(t)+" of "+a(e))}},8886:(e,t,r)=>{var a=r(8113),n=a.match(/firefox\/(\d+)/i);e.exports=!!n&&+n[1]},256:(e,t,r)=>{var a=r(8113);e.exports=/MSIE|Trident/.test(a)},8008:(e,t,r)=>{var a=r(8113),n=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!n&&+n[1]},1340:(e,t,r)=>{var a=r(648),n=String;e.exports=function(e){if("Symbol"===a(e))throw TypeError("Cannot convert a Symbol value to a string");return n(e)}},2707:(e,t,r)=>{"use strict";var a=r(2109),n=r(1702),l=r(9662),i=r(7908),o=r(6244),s=r(5117),u=r(1340),c=r(7293),f=r(4362),p=r(9341),d=r(8886),v=r(256),h=r(7392),m=r(8008),g=[],_=n(g.sort),w=n(g.push),k=c((function(){g.sort(void 0)})),x=c((function(){g.sort(null)})),y=p("sort"),S=!c((function(){if(h)return h<70;if(!(d&&d>3)){if(v)return!0;if(m)return m<603;var e,t,r,a,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(a=0;a<47;a++)g.push({k:t+a,v:r})}for(g.sort((function(e,t){return t.v-e.v})),a=0;a<g.length;a++)t=g[a].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}})),U=k||!x||!y||!S,b=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:u(t)>u(r)?1:-1}};a({target:"Array",proto:!0,forced:U},{sort:function(e){void 0!==e&&l(e);var t=i(this);if(S)return void 0===e?_(t):_(t,e);var r,a,n=[],u=o(t);for(a=0;a<u;a++)a in t&&w(n,t[a]);f(n,b(e)),r=o(n),a=0;while(a<r)t[a]=n[a++];while(a<u)s(t,a++);return t}})},6746:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});r(7658),r(2707);var a=r(4448);const n=r.p+"img/add_camera.90de5f70.svg";var l=r(6154),i=r(7436),o=r(8903),s=r(2201);const u={class:"mt-2 flex flex-wrap justify-between"},c=["onClick"],f={class:"flex justify-center"},p={class:"flex justify-center py-2 text-base"},d={class:"flex items-center justify-end py-2 pr-4 font-sans text-base font-bold text-green-600"},v={class:"flex items-center justify-between px-7"},h=(0,a._)("img",{class:"h-10 w-10",src:n,alt:""},null,-1),m=[h],g=(0,a.aZ)({__name:"MainPage",setup(e){const t=(0,s.tv)(),r=((0,a.iH)([{type:"camera",is_tracked:"camera",title:"Camera 1",url:"",zmq_port:2180,_id:"fdsfd"}]),(0,a.iH)([])),n=(0,a.iH)(!1),h=(0,a.iH)("Датчик"),g=(0,a.iH)({}),_=[{text:"Отмена",role:"cancel",handler:()=>{k()}},{text:"Да",role:"confirm",handler:()=>{y(g.value._id,g.value.type),k()}}];function w(e){g.value=e;const t="camera"===e.type?"камеру":"датчик";h.value=`Удалить ${t}?`,n.value=!0}function k(){n.value=!1}function x(){r.value=[],l.Z.get("https://6e72-94-143-243-49.ngrok-free.app/api/cameras").then((e=>{e.data.forEach((e=>r.value.push({...e,type:"camera",quality:Math.floor(85+15*Math.random())})))})),l.Z.get("https://6e72-94-143-243-49.ngrok-free.app/api/sensors").then((e=>{e.data.forEach((e=>r.value.push({...e,type:"sensor",quality:"OK"})))})),console.log(r.value)}function y(e,t){"camera"===t?l.Z["delete"](`https://6e72-94-143-243-49.ngrok-free.app/api/cameras/${e}`).then((()=>x())):l.Z["delete"](`https://6e72-94-143-243-49.ngrok-free.app/api/sensors/${e}`).then((()=>x()))}function S(e){e.is_tracked?l.Z.post(`https://6e72-94-143-243-49.ngrok-free.app/api/${e.type}s/${e._id}/tracking/stop`):l.Z.post(`https://6e72-94-143-243-49.ngrok-free.app/api/${e.type}s/${e._id}/tracking/start`)}function U(e,t){return e.title<t.title?-1:e.title>t.title?1:0}function b(){t.push("/add_equipment/camera")}function C(){t.push("/add_equipment/sensor")}function W(e){t.push({name:"equipmentPage",params:{id:e._id,equipmentType:e.type}})}return x(),(e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)((0,a.SU)(i.Gu),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,a.SU)(i.sr),{class:"flex h-16 font-sans text-black"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,a.SU)(i.wd),{class:"text-2xl"},{default:(0,a.w5)((()=>[(0,a.Uk)("Список оборудования("+(0,a.zw)(r.value.length)+")",1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)((0,a.SU)(i.W2),{class:"h-[85%] overflow-y-auto"},{default:(0,a.w5)((()=>[(0,a._)("div",u,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.value.sort(U),(e=>((0,a.wg)(),(0,a.j4)((0,a.SU)(i.PM),{key:e._id,class:"w-[44%] hover:cursor-pointer",onClick:t=>W(e)},{default:(0,a.w5)((()=>[(0,a.Wm)((0,a.SU)(i.Zi),{class:"-mr-7 flex items-center justify-between pl-3 pt-2 pb-0"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,a.SU)(i.ho),{modelValue:e.is_tracked,"onUpdate:modelValue":t=>e.is_tracked=t,mode:"ios",color:"success",onClick:(0,a.iM)((t=>S(e)),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"]),(0,a._)("div",{class:"mr-5 flex justify-center hover:cursor-pointer active:scale-95",onClick:(0,a.iM)((t=>w(e)),["stop"])},[(0,a.Wm)((0,a.SU)(i.gu),{class:"h-10 w-10",color:"dark",icon:(0,a.SU)(o.fID)},null,8,["icon"])],8,c)])),_:2},1024),(0,a._)("div",f,[(0,a.Wm)((0,a.SU)(i.gu),{class:"h-16 w-16 pl-3",icon:"camera"===e.type?(0,a.SU)(o.kuq):(0,a.SU)(o.z9J)},null,8,["icon"])]),(0,a._)("div",p,(0,a.zw)(e.title?e.title:"no-title"),1),(0,a._)("div",null,[(0,a._)("div",d,(0,a.zw)(e.quality),1)])])),_:2},1032,["onClick"])))),128))])])),_:1}),(0,a.Wm)((0,a.SU)(i.fr),null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,a.SU)(i.sr),null,{default:(0,a.w5)((()=>[(0,a._)("div",v,[(0,a._)("div",{class:"flex items-center rounded-lg bg-[#e4e4e4] px-10 py-0.5 active:scale-95",onClick:C},[(0,a.Wm)((0,a.SU)(i.gu),{class:"h-10 w-10",color:"dark",icon:(0,a.SU)(o.z9J)},null,8,["icon"])]),(0,a._)("div",{class:"flex items-center rounded-lg bg-[#e4e4e4] px-10 py-0.5 active:scale-95",onClick:b},m)])])),_:1})])),_:1}),(0,a.Wm)((0,a.SU)(i.Ge),{"is-open":n.value,header:h.value,buttons:_},null,8,["is-open","header"])],64))}}),_=g,w=_}}]);
//# sourceMappingURL=601-legacy.70368a75.js.map