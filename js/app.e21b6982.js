(()=>{var e={1993:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=1993,e.exports=t},6919:(e,t,a)=>{"use strict";a(6992),a(8674),a(7727);var l=a(4448),n=a(7436);const r=(0,l.aZ)({__name:"App",setup(e){return(e,t)=>{const a=(0,l.up)("router-view");return(0,l.wg)(),(0,l.j4)((0,l.SU)(n.dr),null,{default:(0,l.w5)((()=>[(0,l.Wm)(a)])),_:1})}}}),o=r,i=o;a(3948);var s=a(1089),u=(a(7658),a(6154)),d=a(2201),c=a(8903);const p={class:"m-4 flex h-full flex-col gap-5"};var m;(function(e){e["camera"]="камера",e["sensor"]="датчик"})(m||(m={}));const f=(0,l.aZ)({__name:"AddEquipmentPage",setup(e){const t=(0,d.tv)(),a=(0,d.yj)(),r=(0,l.iH)(""),o=(0,l.iH)(0),i=(0,l.iH)(""),s=(0,l.iH)(0),m=(0,l.iH)(0),f=(0,l.Fl)((()=>"camera"===a.params.equipmentName?"camera":"sensor"));function v(){"camera"===f.value?u.Z.post("https://6e72-94-143-243-49.ngrok-free.app/api/cameras",{title:r.value,url:i.value,zmq_port:o.value}).then((()=>h())):u.Z.post("https://6e72-94-143-243-49.ngrok-free.app/api/sensors",{title:r.value,mqtt_topic:s.value,mqtt_field:m.value}).then((()=>h()))}function h(){t.push("/")}return(e,t)=>{const a=(0,l.up)("ion-label");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)((0,l.SU)(n.Gu),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,l.SU)(n.sr),{class:"flex h-16 font-sans text-black"},{default:(0,l.w5)((()=>[(0,l._)("div",{class:"ml-4 flex items-center rounded-lg bg-[#eeeeee] px-2 py-1 active:scale-95",slot:"start",onClick:h},[(0,l.Wm)((0,l.SU)(n.gu),{class:"h-7 w-7",color:"dark",icon:(0,l.SU)(c.Pjk)},null,8,["icon"])]),(0,l.Wm)((0,l.SU)(n.wd),{class:"text-2xl"},{default:(0,l.w5)((()=>[(0,l.Uk)("Добавление "+(0,l.zw)("camera"===(0,l.SU)(f)?"камеры":"датчика"),1)])),_:1})])),_:1})])),_:1}),(0,l._)("div",p,[(0,l.Wm)((0,l.SU)(n.Ie),{fill:"outline"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{position:"floating"},{default:(0,l.w5)((()=>[(0,l.Uk)("Название")])),_:1}),(0,l.Wm)((0,l.SU)(n.pK),{placeholder:"Введите текст",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e)},null,8,["modelValue"])])),_:1}),"camera"===(0,l.SU)(f)?((0,l.wg)(),(0,l.j4)((0,l.SU)(n.Ie),{key:0,fill:"outline"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{position:"floating"},{default:(0,l.w5)((()=>[(0,l.Uk)("Порт zmq")])),_:1}),(0,l.Wm)((0,l.SU)(n.pK),{placeholder:"Введите текст",modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e)},null,8,["modelValue"])])),_:1})):(0,l.kq)("",!0),"camera"===(0,l.SU)(f)?((0,l.wg)(),(0,l.j4)((0,l.SU)(n.Ie),{key:1,fill:"outline"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{position:"floating"},{default:(0,l.w5)((()=>[(0,l.Uk)("URL")])),_:1}),(0,l.Wm)((0,l.SU)(n.pK),{placeholder:"Введите текст",modelValue:i.value,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e)},null,8,["modelValue"])])),_:1})):(0,l.kq)("",!0),"sensor"===(0,l.SU)(f)?((0,l.wg)(),(0,l.j4)((0,l.SU)(n.Ie),{key:2,fill:"outline"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{position:"floating"},{default:(0,l.w5)((()=>[(0,l.Uk)("Mqtt topic")])),_:1}),(0,l.Wm)((0,l.SU)(n.pK),{placeholder:"Введите текст",modelValue:s.value,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e)},null,8,["modelValue"])])),_:1})):(0,l.kq)("",!0),"sensor"===(0,l.SU)(f)?((0,l.wg)(),(0,l.j4)((0,l.SU)(n.Ie),{key:3,fill:"outline"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{position:"floating"},{default:(0,l.w5)((()=>[(0,l.Uk)("Mqtt field")])),_:1}),(0,l.Wm)((0,l.SU)(n.pK),{placeholder:"Введите текст",modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=e=>m.value=e)},null,8,["modelValue"])])),_:1})):(0,l.kq)("",!0),(0,l.Wm)((0,l.SU)(n.YG),{class:"no-ripple text-md h-14 font-bold",shape:"round",color:"success",onClickOnce:v},{default:(0,l.w5)((()=>[(0,l.Uk)("Добавить "+(0,l.zw)("camera"===(0,l.SU)(f)?"камеру":"датчик"),1)])),_:1})])],64)}}});var v=a(3744);const h=(0,v.Z)(f,[["__scopeId","data-v-62779335"]]),g=h;var k=a(6915);const b=e=>((0,l.dD)("data-v-2dcd1fc7"),e=e(),(0,l.Cn)(),e),w={class:"flex flex-col"},y={class:"mx-4 mt-7 flex items-center justify-between border-b border-gray-300 pb-3"},_=b((()=>(0,l._)("span",{class:"text-base"},"Вкл/выкл отслеживание",-1))),U=(0,l.aZ)({__name:"EquipmentPage",props:["id","equipmentType"],setup(e){const t=e,a=(0,l.iH)(null),r=(0,d.tv)(),o=((0,d.yj)(),(0,l.iH)({})),i=[{date:"2023-02-28 15:12:08",value:42},{date:"2023-02-27 15:12:08",value:62},{date:"2023-02-21 15:12:08",value:82},{date:"2023-02-11 15:12:08",value:92},{date:"2023-02-01 15:12:08",value:62}];(0,l.bv)((()=>{const e={left:.12*a.value.getBoundingClientRect().width,bottom:.1*a.value.getBoundingClientRect().height,top:.05*a.value.getBoundingClientRect().height},{height:t}=a.value.getBoundingClientRect(),{width:l}=a.value.getBoundingClientRect(),n=(0,k.Ys)(a.value),r=n.append("g"),o=(0,k.Z1g)("%Y-%m-%d %H:%M:%S"),s=(0,k.Xf)().domain((0,k.Wem)(i||[],(e=>o(e.date)))).rangeRound([e.left,l-1]),u=(0,k.BYU)().domain((0,k.Wem)(i||[],(e=>e.value))).rangeRound([t-e.bottom,e.top]),d=(0,k.jvg)().x((e=>s(o(e.date)))).y((e=>u(e.value))),c=r.append("g").attr("transform",`translate(0,${t-e.bottom})`).call((0,k.LLu)(s).ticks(4).tickFormat((0,k.i$Z)("%m.%d"))),p=r.append("g").attr("transform",`translate(${e.left}, 0)`).call((0,k.y4O)(u));c.selectAll(".tick line").remove(),c.select(".domain").attr("stroke","#3899f5"),c.selectAll(".tick text").attr("color","#3899f5").attr("font-size","16px").attr("transform",`translate(0, ${.3*e.bottom})`),p.selectAll(".tick line").remove(),p.selectAll(".tick text").attr("color","#3899f5").attr("font-size","16px").attr("transform",`translate(-${.1*e.left}, 0)`),p.select(".domain").remove(),p.selectAll(".tick").append("line").attr("class","gridline").attr("x1",0).attr("y1",0).attr("x2",l).attr("y2",0).attr("stroke","#86c0f7").attr("stroke-dasharray","2"),p.selectAll(".tick:first-of-type line").remove(),r.append("path").datum(i||[]).attr("fill","none").attr("stroke","#855CF8").attr("stroke-width",2).attr("d",d)})),u.Z.get(`https://6e72-94-143-243-49.ngrok-free.app/api/${t.equipmentType}s/${t.id}`).then((e=>o.value=e.data));const s=(0,l.iH)(!1),p=(0,l.iH)(""),m=(0,l.iH)({}),f=[{text:"Отмена",role:"cancel",handler:()=>{h()}},{text:"Да",role:"confirm",handler:()=>{g(m.value._id),h()}}];function v(){m.value=o.value;const e="camera"===t.equipmentType?"камеру":"датчик";p.value=`Удалить ${e}?`,s.value=!0}function h(){s.value=!1}function g(e){u.Z["delete"](`https://6e72-94-143-243-49.ngrok-free.app/api/${t.equipmentType}s/${e}`).then((()=>U()))}function b(){o.value.is_tracked?u.Z.post(`https://6e72-94-143-243-49.ngrok-free.app/api/${t.equipmentType}s/${t.id}/tracking/stop`):u.Z.post(`https://6e72-94-143-243-49.ngrok-free.app/api/${t.equipmentType}s/${t.id}/tracking/start`)}function U(){r.push("/")}return(e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",w,[(0,l.Wm)((0,l.SU)(n.Gu),null,{default:(0,l.w5)((()=>[(0,l.Wm)((0,l.SU)(n.sr),{class:"flex h-16 font-sans text-black"},{default:(0,l.w5)((()=>[(0,l._)("div",{class:"ml-4 flex items-center rounded-lg bg-[#eeeeee] px-2 py-1 hover:cursor-pointer active:scale-95",slot:"start",onClick:U},[(0,l.Wm)((0,l.SU)(n.gu),{class:"h-7 w-7",color:"dark",icon:(0,l.SU)(c.Pjk)},null,8,["icon"])]),(0,l.Wm)((0,l.SU)(n.wd),{class:"text-center text-2xl"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(o.value.title),1)])),_:1}),(0,l._)("div",{class:"flex justify-center pr-2 active:scale-95",slot:"end",onClick:v},[(0,l.Wm)((0,l.SU)(n.gu),{class:"h-7 w-7 text-red-700 hover:cursor-pointer",icon:(0,l.SU)(c.gtu)},null,8,["icon"])])])),_:1})])),_:1}),(0,l._)("div",y,[_,(0,l.Wm)((0,l.SU)(n.ho),{modelValue:o.value.is_tracked,"onUpdate:modelValue":t[0]||(t[0]=e=>o.value.is_tracked=e),class:"h-8 w-14",mode:"ios",color:"success",onClick:t[1]||(t[1]=(0,l.iM)((t=>b(e.item)),["stop"]))},null,8,["modelValue"])]),((0,l.wg)(),(0,l.iD)("svg",{class:"mt-10 self-center",width:"90%",height:"300",ref_key:"chart",ref:a},null,512))]),(0,l.Wm)((0,l.SU)(n.Ge),{"is-open":s.value,header:p.value,buttons:f},null,8,["is-open","header"])],64))}}),S=(0,v.Z)(U,[["__scopeId","data-v-2dcd1fc7"]]),x=S,q=[{path:"/",redirect:"/home"},{path:"/home",component:()=>a.e(601).then(a.bind(a,6746))},{path:"/add_equipment/:equipmentName",name:"addEquipmentPage",component:g},{path:"/equipment_page/:equipmentType/:id",name:"equipmentPage",component:x,props:!0},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>a.e(814).then(a.bind(a,814))}],C=(0,s.p7)({history:(0,s.PO)("eye/"),routes:q}),W=C;a(8851),a(1292),a(1633),a(1045),a(6187),a(2299),a(3423),a(4687),a(9147),a(6250);const j=(0,l.ri)(i).use(n.oX).use(W);W.isReady().then((()=>{j.mount("#app")})),u.Z.defaults.headers.common["Access-Control-Allow-Origin"]="*",u.Z.defaults.headers.common["ngrok-skip-browser-warning"]="69420"}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(t,l,n,r)=>{if(!l){var o=1/0;for(d=0;d<e.length;d++){for(var[l,n,r]=e[d],i=!0,s=0;s<l.length;s++)(!1&r||o>=r)&&Object.keys(a.O).every((e=>a.O[e](l[s])))?l.splice(s--,1):(i=!1,r<o&&(o=r));if(i){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[l,n,r]}})(),(()=>{a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}})(),(()=>{a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,l)=>(a.f[l](e,t),t)),[]))})(),(()=>{a.u=e=>"js/"+e+"."+{78:"9cfbc549",338:"73393f2a",541:"e419762c",544:"ad152fa3",576:"065874fb",601:"70368a75",753:"b94f5258",775:"5a7b4471",814:"d7633102",823:"c1889fe2",990:"11ed8b86"}[e]+".js"})(),(()=>{a.miniCssF=e=>"css/"+e+"."+{601:"27335bd8",814:"a499b395"}[e]+".css"})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="starter-ionic:";a.l=(l,n,r,o)=>{if(e[l])e[l].push(n);else{var i,s;if(void 0!==r)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==l||c.getAttribute("data-webpack")==t+r){i=c;break}}i||(s=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+r),i.src=l),e[l]=[n];var p=(t,a)=>{i.onerror=i.onload=null,clearTimeout(m);var n=e[l];if(delete e[l],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(a))),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),s&&document.head.appendChild(i)}}})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{a.p="eye/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,a,l,n)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var o=a=>{if(r.onerror=r.onload=null,"load"===a.type)l();else{var o=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=i,r.parentNode.removeChild(r),n(s)}};return r.onerror=r.onload=o,r.href=t,a?a.parentNode.insertBefore(r,a.nextSibling):document.head.appendChild(r),r},t=(e,t)=>{for(var a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var n=a[l],r=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(r===e||r===t))return n}var o=document.getElementsByTagName("style");for(l=0;l<o.length;l++){n=o[l],r=n.getAttribute("data-href");if(r===e||r===t)return n}},l=l=>new Promise(((n,r)=>{var o=a.miniCssF(l),i=a.p+o;if(t(o,i))return n();e(l,i,null,n,r)})),n={143:0};a.f.miniCss=(e,t)=>{var a={601:1,814:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=l(e).then((()=>{n[e]=0}),(t=>{throw delete n[e],t})))}}})(),(()=>{var e={143:0};a.f.j=(t,l)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)l.push(n[2]);else{var r=new Promise(((a,l)=>n=e[t]=[a,l]));l.push(n[2]=r);var o=a.p+a.u(t),i=new Error,s=l=>{if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var r=l&&("load"===l.type?"missing":l.type),o=l&&l.target&&l.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",i.name="ChunkLoadError",i.type=r,i.request=o,n[1](i)}};a.l(o,s,"chunk-"+t,t)}},a.O.j=t=>0===e[t];var t=(t,l)=>{var n,r,[o,i,s]=l,u=0;if(o.some((t=>0!==e[t]))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(s)var d=s(a)}for(t&&t(l);u<o.length;u++)r=o[u],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},l=self["webpackChunkstarter_ionic"]=self["webpackChunkstarter_ionic"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var l=a.O(void 0,[998],(()=>a(6919)));l=a.O(l)})();
//# sourceMappingURL=app.e21b6982.js.map